apiVersion: apiextensions.k8s.io/v1beta1
kind: CustomResourceDefinition
metadata:
  name: pipelinedeployments.algo.run
spec:
  group: algo.run
  names:
    kind: PipelineDeployment
    listKind: PipelineDeploymentList
    plural: pipelinedeployments
    singular: pipelinedeployment
  scope: Namespaced
  validation:
    openAPIV3Schema:
      properties:
        apiVersion:
          description: 'APIVersion defines the versioned schema of this representation
            of an object. Servers should convert recognized schemas to the latest
            internal value, and may reject unrecognized values. More info: https://git.k8s.io/community/contributors/devel/api-conventions.md#resources'
          type: string
        kind:
          description: 'Kind is a string value representing the REST resource this
            object represents. Servers may infer this from the endpoint the client
            submits requests to. Cannot be updated. In CamelCase. More info: https://git.k8s.io/community/contributors/devel/api-conventions.md#types-kinds'
          type: string
        metadata:
          type: object
        spec:
          properties:
            imagePullPolicy:
              type: string
            kafkaBrokers:
              type: string
            pipelineSpec:
              properties:
                algoConfigs:
                  items:
                    properties:
                      algoIndex:
                        format: int32
                        type: integer
                      algoName:
                        type: string
                      algoOwnerUserName:
                        type: string
                      algoParams:
                        items:
                          properties:
                            dataType:
                              properties:
                                mask:
                                  type: string
                                name:
                                  type: string
                                precision:
                                  format: int32
                                  type: integer
                                regex:
                                  type: string
                                scale:
                                  format: int32
                                  type: integer
                              required:
                              - name
                              type: object
                            description:
                              type: string
                            name:
                              type: string
                            options:
                              items:
                                properties:
                                  name:
                                    type: string
                                type: object
                              type: array
                            sortOrder:
                              format: int32
                              type: integer
                            value:
                              type: string
                          required:
                          - name
                          type: object
                        type: array
                      algoRunnerImage:
                        type: string
                      algoRunnerImageTag:
                        type: string
                      algoVersionTag:
                        type: string
                      applied:
                        type: boolean
                      deploymentName:
                        type: string
                      entrypoint:
                        type: string
                      executor:
                        type: string
                      gpuEnabled:
                        type: boolean
                      imageRepository:
                        type: string
                      imageTag:
                        type: string
                      inputs:
                        items:
                          properties:
                            contentTypes:
                              items:
                                properties:
                                  encoding:
                                    type: string
                                  fileExtension:
                                    type: string
                                  groupName:
                                    type: string
                                  iconClass:
                                    type: string
                                  name:
                                    type: string
                                  rfc:
                                    type: string
                                  rfcUrl:
                                    type: string
                                  subTypeName:
                                    type: string
                                  title:
                                    type: string
                                  url:
                                    type: string
                                type: object
                              type: array
                            description:
                              type: string
                            environmentVariable:
                              type: string
                            httpHeaders:
                              type: string
                            httpPath:
                              type: string
                            httpPort:
                              format: int32
                              type: integer
                            httpVerb:
                              type: string
                            inputDeliveryType:
                              type: string
                            isRequired:
                              type: boolean
                            name:
                              type: string
                            parameter:
                              type: string
                            parameterDelimiter:
                              type: string
                          required:
                          - name
                          - inputDeliveryType
                          - contentTypes
                          type: object
                        type: array
                      livenessInitialDelaySeconds:
                        format: int32
                        type: integer
                      livenessPeriodSeconds:
                        format: int32
                        type: integer
                      livenessTimeoutSeconds:
                        format: int32
                        type: integer
                      outputs:
                        items:
                          properties:
                            contentType:
                              properties:
                                encoding:
                                  type: string
                                fileExtension:
                                  type: string
                                groupName:
                                  type: string
                                iconClass:
                                  type: string
                                name:
                                  type: string
                                rfc:
                                  type: string
                                rfcUrl:
                                  type: string
                                subTypeName:
                                  type: string
                                title:
                                  type: string
                                url:
                                  type: string
                              type: object
                            description:
                              type: string
                            name:
                              type: string
                            outputDeliveryType:
                              type: string
                            parameter:
                              type: string
                          required:
                          - name
                          - outputDeliveryType
                          - contentType
                          type: object
                        type: array
                      readinessInitialDelaySeconds:
                        format: int32
                        type: integer
                      readinessPeriodSeconds:
                        format: int32
                        type: integer
                      readinessTimeoutSeconds:
                        format: int32
                        type: integer
                      resource:
                        properties:
                          autoScale:
                            type: boolean
                          cpuLimitUnits:
                            format: double
                            type: number
                          cpuRequestUnits:
                            format: double
                            type: number
                          gpuLimitUnits:
                            format: double
                            type: number
                          instances:
                            format: int32
                            type: integer
                          maxInstances:
                            format: int32
                            type: integer
                          memoryLimitBytes:
                            format: int64
                            type: integer
                          memoryRequestBytes:
                            format: int64
                            type: integer
                          minInstances:
                            format: int32
                            type: integer
                          scaleMetrics:
                            items:
                              properties:
                                name:
                                  type: string
                                selector:
                                  type: string
                                sourceType:
                                  type: string
                                targetAverageUtilization:
                                  format: int32
                                  type: integer
                                targetAverageValue:
                                  format: double
                                  type: number
                              type: object
                            type: array
                        type: object
                      timeoutSeconds:
                        format: int32
                        type: integer
                      writeAllOutputs:
                        type: boolean
                    type: object
                  type: array
                dataConnectorConfigs:
                  items:
                    properties:
                      connectorClass:
                        type: string
                      dataConnectorType:
                        type: string
                      deploymentName:
                        type: string
                      imageRepository:
                        type: string
                      imageTag:
                        type: string
                      index:
                        format: int32
                        type: integer
                      name:
                        type: string
                      options:
                        items:
                          properties:
                            dataType:
                              properties:
                                mask:
                                  type: string
                                name:
                                  type: string
                                precision:
                                  format: int32
                                  type: integer
                                regex:
                                  type: string
                                scale:
                                  format: int32
                                  type: integer
                              required:
                              - name
                              type: object
                            description:
                              type: string
                            name:
                              type: string
                            required:
                              type: boolean
                            sortOrder:
                              format: int32
                              type: integer
                            value:
                              type: string
                          type: object
                        type: array
                      tasksMax:
                        format: int32
                        type: integer
                      versionTag:
                        type: string
                    type: object
                  type: array
                deploymentName:
                  type: string
                deploymentOwnerUserName:
                  type: string
                endpointConfig:
                  properties:
                    deploymentName:
                      type: string
                    deploymentOwnerUserName:
                      type: string
                    imageRepository:
                      type: string
                    imageTag:
                      type: string
                    kafka:
                      properties:
                        brokers:
                          items:
                            type: string
                          type: array
                      type: object
                    paths:
                      items:
                        properties:
                          connectionString:
                            type: string
                          contentType:
                            properties:
                              encoding:
                                type: string
                              fileExtension:
                                type: string
                              groupName:
                                type: string
                              iconClass:
                                type: string
                              name:
                                type: string
                              rfc:
                                type: string
                              rfcUrl:
                                type: string
                              subTypeName:
                                type: string
                              title:
                                type: string
                              url:
                                type: string
                            type: object
                          description:
                            type: string
                          endpointType:
                            type: string
                          isDefault:
                            type: boolean
                          messageDataType:
                            type: string
                          name:
                            type: string
                        type: object
                      type: array
                    pipelineName:
                      type: string
                    pipelineOwnerUserName:
                      type: string
                    producer:
                      properties:
                        cb:
                          properties:
                            fails:
                              format: int32
                              type: integer
                            interval:
                              format: int32
                              type: integer
                            requests:
                              format: int32
                              type: integer
                            timeout:
                              type: string
                          type: object
                        resend:
                          properties:
                            period:
                              type: string
                          type: object
                        wal:
                          properties:
                            mode:
                              type: string
                            path:
                              type: string
                            size:
                              type: string
                          type: object
                      type: object
                    resource:
                      properties:
                        autoScale:
                          type: boolean
                        cpuLimitUnits:
                          format: double
                          type: number
                        cpuRequestUnits:
                          format: double
                          type: number
                        gpuLimitUnits:
                          format: double
                          type: number
                        instances:
                          format: int32
                          type: integer
                        maxInstances:
                          format: int32
                          type: integer
                        memoryLimitBytes:
                          format: int64
                          type: integer
                        memoryRequestBytes:
                          format: int64
                          type: integer
                        minInstances:
                          format: int32
                          type: integer
                        scaleMetrics:
                          items:
                            properties:
                              name:
                                type: string
                              selector:
                                type: string
                              sourceType:
                                type: string
                              targetAverageUtilization:
                                format: int32
                                type: integer
                              targetAverageValue:
                                format: double
                                type: number
                            type: object
                          type: array
                      type: object
                    server:
                      properties:
                        grpc:
                          properties:
                            listen:
                              type: string
                          type: object
                        http:
                          properties:
                            listen:
                              type: string
                          type: object
                        monitoring:
                          properties:
                            listen:
                              type: string
                          type: object
                      type: object
                  type: object
                hookConfig:
                  properties:
                    deploymentName:
                      type: string
                    deploymentOwnerUserName:
                      type: string
                    imageRepository:
                      type: string
                    imageTag:
                      type: string
                    pipelineName:
                      type: string
                    pipelineOwnerUserName:
                      type: string
                    pipes:
                      items:
                        properties:
                          destInputName:
                            type: string
                          destName:
                            type: string
                          destNodeType:
                            type: string
                          sourceName:
                            type: string
                          sourceNodeType:
                            type: string
                          sourceOutputMessageDataType:
                            type: string
                          sourceOutputName:
                            type: string
                        type: object
                      type: array
                    resource:
                      properties:
                        autoScale:
                          type: boolean
                        cpuLimitUnits:
                          format: double
                          type: number
                        cpuRequestUnits:
                          format: double
                          type: number
                        gpuLimitUnits:
                          format: double
                          type: number
                        instances:
                          format: int32
                          type: integer
                        maxInstances:
                          format: int32
                          type: integer
                        memoryLimitBytes:
                          format: int64
                          type: integer
                        memoryRequestBytes:
                          format: int64
                          type: integer
                        minInstances:
                          format: int32
                          type: integer
                        scaleMetrics:
                          items:
                            properties:
                              name:
                                type: string
                              selector:
                                type: string
                              sourceType:
                                type: string
                              targetAverageUtilization:
                                format: int32
                                type: integer
                              targetAverageValue:
                                format: double
                                type: number
                            type: object
                          type: array
                      type: object
                    topicConfigs:
                      items:
                        properties:
                          nodeType:
                            type: string
                          sourceName:
                            type: string
                          sourceOutputName:
                            type: string
                          topicAutoName:
                            type: boolean
                          topicAutoPartition:
                            type: boolean
                          topicName:
                            type: string
                          topicParams:
                            items:
                              properties:
                                name:
                                  type: string
                                value:
                                  type: string
                              type: object
                            type: array
                          topicPartitions:
                            format: int32
                            type: integer
                          topicReplicationFactor:
                            format: int32
                            type: integer
                        type: object
                      type: array
                    webHooks:
                      items:
                        properties:
                          deploymentName:
                            type: string
                          deploymentOwnerUserName:
                            type: string
                          httpHeaders:
                            type: string
                          httpVerb:
                            type: string
                          pipelineHookInputName:
                            type: string
                          webHookUrl:
                            type: string
                        type: object
                      type: array
                  type: object
                pipelineName:
                  type: string
                pipelineOwnerUserName:
                  type: string
                pipelineVersionTag:
                  type: string
                pipes:
                  items:
                    properties:
                      destInputName:
                        type: string
                      destName:
                        type: string
                      destNodeType:
                        type: string
                      sourceName:
                        type: string
                      sourceNodeType:
                        type: string
                      sourceOutputMessageDataType:
                        type: string
                      sourceOutputName:
                        type: string
                    type: object
                  type: array
                topicConfigs:
                  items:
                    properties:
                      nodeType:
                        type: string
                      sourceName:
                        type: string
                      sourceOutputName:
                        type: string
                      topicAutoName:
                        type: boolean
                      topicAutoPartition:
                        type: boolean
                      topicName:
                        type: string
                      topicParams:
                        items:
                          properties:
                            name:
                              type: string
                            value:
                              type: string
                          type: object
                        type: array
                      topicPartitions:
                        format: int32
                        type: integer
                      topicReplicationFactor:
                        format: int32
                        type: integer
                    type: object
                  type: array
              type: object
          type: object
        status:
          properties:
            algoDeploymentStatuses:
              items:
                properties:
                  algoIndex:
                    format: int32
                    type: integer
                  algoName:
                    type: string
                  algoOwnerName:
                    type: string
                  algoVersionTag:
                    type: string
                  available:
                    format: int32
                    type: integer
                  createdTimestamp:
                    type: string
                  current:
                    format: int32
                    type: integer
                  desired:
                    format: int32
                    type: integer
                  name:
                    type: string
                  ready:
                    format: int32
                    type: integer
                  upToDate:
                    format: int32
                    type: integer
                type: object
              type: array
            algoPodStatuses:
              items:
                properties:
                  algoIndex:
                    format: int32
                    type: integer
                  algoName:
                    type: string
                  algoOwnerName:
                    type: string
                  algoVersionTag:
                    type: string
                  containerStatuses:
                    items:
                      type: object
                    type: array
                  createdTimestamp:
                    type: string
                  ip:
                    type: string
                  name:
                    type: string
                  node:
                    type: string
                  restarts:
                    format: int32
                    type: integer
                  status:
                    type: string
                type: object
              type: array
            deploymentName:
              type: string
            deploymentOwnerUserName:
              type: string
            status:
              type: string
          type: object
  version: v1alpha1
  versions:
  - name: v1alpha1
    served: true
    storage: true
